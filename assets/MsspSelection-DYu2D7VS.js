import{r as o,u as A,d as j,j as s,H as B,F as E,P as S}from"./index-Bbv6LWVa.js";import{S as T,B as q}from"./Button-DpJdQcSW.js";const z="_MSSPSelection_knnoc_2",F="_msspSelection_knnoc_8",O="_msspSelectionContainer_knnoc_15",H="_msspListContainer_knnoc_22",I="_selectedMsspListContainer_knnoc_23",w="_msspList_knnoc_22",D="_selectedMsspList_knnoc_23",G="_msspControls_knnoc_46",J="_msspControlBtn_knnoc_53",K="_pushToRight_knnoc_69",Q="_error_knnoc_77",t={MSSPSelection:z,msspSelection:F,msspSelectionContainer:O,msspListContainer:H,selectedMsspListContainer:I,msspList:w,selectedMsspList:D,msspControls:G,msspControlBtn:J,pushToRight:K,error:Q};function W(){const[a,l]=o.useState([]),[n,p]=o.useState([]),[i,u]=o.useState([]),[h,g]=o.useState([]),[M,_]=o.useState(""),[P,C]=o.useState(!0),b=A();o.useEffect(()=>{try{C(!0);const e=j.getOrganizationList();if(Array.isArray(e)){const m=e.filter(c=>c.is_mssp);l(m)}else _("No MSSP organizations available.")}catch(e){console.error("Error fetching MSSPs:",e),_("Failed to fetch MSSPs. Please try again later.")}finally{C(!1)}},[]);const v=(e,m,c,y)=>{const R=e.map(r=>a.find(d=>d.mssp_id===r)||n.find(d=>d.mssp_id===r));c(r=>r.filter(d=>!e.includes(d.mssp_id))),y(r=>[...r,...R])},f=()=>{v(i,n,l,p),u([])},k=()=>{v(h,a,p,l),g([])},N=()=>{try{j.setSelectedMSSPs(n),b("/generate-report",{state:{selectedMssps:n}})}catch(e){console.error("Error submitting MSSPs:",e),_("Error submitting MSSPs. Please try again.")}},x=e=>m=>{e(Array.from(m.target.selectedOptions,c=>Number(c.value)))};return s.jsxs("div",{className:t.MSSPSelection,children:[s.jsx(B,{}),s.jsxs("div",{className:t.msspSelection,children:[s.jsx("h1",{children:"Select MSSPs for Billing Report"}),P?s.jsx(T,{}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:t.msspSelectionContainer,children:[s.jsxs("div",{className:t.msspListContainer,children:[s.jsx("h2",{children:"Available MSSPs"}),s.jsx("select",{multiple:!0,value:i,onChange:x(u),className:t.msspList,"aria-label":"Available MSSPs","aria-live":"polite",children:a.map(e=>s.jsx("option",{value:e.mssp_id,children:e.organization_name},e.mssp_id))})]}),s.jsxs("div",{className:t.msspControls,children:[s.jsx("button",{className:t.msspControlBtn,onClick:f,disabled:!i.length,children:"Add >>"}),s.jsx("button",{className:t.msspControlBtn,onClick:k,disabled:!h.length,children:"<< Remove"})]}),s.jsx(L,{title:"Selected MSSPs",items:n,selected:h,onChange:x(g)})]}),M&&s.jsx("p",{className:t.error,children:M}),s.jsx("div",{className:t.pushToRight,children:s.jsx(q,{theme:"dark",onClick:N,ariaLabel:"Proceed to generate report submission",children:"Continue"})})]})]}),s.jsx(E,{})]})}const L=({title:a,items:l,selected:n,onChange:p})=>s.jsxs("div",{className:t.msspListContainer,children:[s.jsx("h2",{children:a}),s.jsx("select",{multiple:!0,value:n,onChange:p,className:t.msspList,"aria-label":a,"aria-live":"polite",children:l.map(i=>s.jsx("option",{value:i.mssp_id,children:i.organization_name},i.mssp_id))})]});L.propTypes={title:S.string.isRequired,items:S.array.isRequired,selected:S.array.isRequired,onChange:S.func.isRequired};export{W as default};
